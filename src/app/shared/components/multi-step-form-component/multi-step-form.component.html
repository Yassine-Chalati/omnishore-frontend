<div class="modal-dialog modal-xl modal-dialog-centered position-relative w-100" style="z-index:1060; max-width: 1500px;">
  <div class="d-flex flex-row w-100 align-items-center" style="min-height: 600px;">
    <!-- Steps Sidebar OUTSIDE the modal card -->
    <div class="d-flex flex-column align-items-center bg-light h-100"
         style="min-width: 400px; max-width: 520px; border-radius: 2rem; box-shadow: 0 2px 16px rgba(44,36,92,0.08); margin-right: 4rem; pointer-events: auto; min-height: 600px; max-height: 90vh; overflow-y: auto;"
         [@sidebarAnim]="modalState">
      <div class="w-100 px-3 px-md-4 py-4">
        <div class="mb-4 text-center">
          <span class="fs-5 fs-md-4 fw-bold text-primary">Votre CV structur√©</span>
        </div>
        <div class="d-flex flex-column gap-3 w-100">
          <app-step-card
            *ngFor="let step of steps; let i = index"
            [label]="step.label"
            [icon]="step.icon"
            [selected]="i === selectedStepIndex"
            (stepClick)="selectStep(i)">
          </app-step-card>
        </div>
      </div>
    </div>
    <!-- Modal Card Content -->
    <div class="modal-content shadow-lg rounded-5 border-0 bg-white p-0 w-100 overflow-hidden position-relative h-100"
         style="box-shadow:0 8px 48px rgba(44,36,92,0.18)!important; min-height: 600px; max-width: 1000px;"
         [@modalAnim]="modalState">
      <button class="btn btn-sm position-absolute top-0 end-0 close-zoom-btn" style="font-size:1.4rem; color:#30245c; background:transparent; border:none; box-shadow:none; transition: color 0.2s, transform 0.2s; margin: 1rem 1.2rem 0 0; padding: 0.3rem 0.7rem;" (click)="onClose()" title="Fermer">
        <i class="bi bi-x-lg"></i>
      </button> 
      <div class="d-flex align-items-center justify-content-center w-100 h-100">
        <section class="w-100 d-flex flex-column justify-content-center align-items-center p-2 p-sm-3 p-md-5" style="min-width:0; max-width:100vw;">
          <div class="w-100 h-100">
            <ng-container>
              <app-form-personal-info *ngIf="selectedStepIndex === 0" [@stepAnimation] [data]="personalInfo"></app-form-personal-info>
              <app-form-education *ngIf="selectedStepIndex === 1" [@stepAnimation] [education]="educationData"></app-form-education>
              <app-form-experience *ngIf="selectedStepIndex === 2" [@stepAnimation] [data]="experienceData"></app-form-experience>
              <app-form-contact *ngIf="selectedStepIndex === 3" [@stepAnimation] [data]="contactData"></app-form-contact>
              <app-form-certification *ngIf="selectedStepIndex === 4" [@stepAnimation] [data]="certificationData"></app-form-certification>
            </ng-container>
          </div>
        </section>
      </div>
    </div>
  </div>
</div>
